---
layout: post
title: 日記 nvim-treesitterに破壊的変更がされていた
categories: diary
name: 日記 nvim-treesitterに破壊的変更がされていた
date: 2026-01-17
---

お久しぶりです。

NeovimのLazyを使って入れているプラグインをアップデートしたのですが、するとnvim-treesitterがエラーを吐くようになりました。

エラーメッセージを見るかぎり、どうやらnvim-treesitter.configsが見つからないようです。  
それで、nvim-treesitterを一度消して入れなおしたりしてみていたのですが、特に解決しませんでした。

色々調べてみたところ、nvim-treesitterはブランチがmasterからmainに移行しており、今回mainブランチがデフォルトブランチになったようです。  
このブランチはmasterブランチとは別物になっており、nvim-treesitter.configは存在しないようでした。そのせいでエラーを吐いていたようです。

このmainブランチへの各プラグインの対応状況はまちまちな感じだったので、

```
branch = 'master'
```

を設定ファイルに追加することで対処しました。  
対応状況が安定してきたら移行を考えようと思います。

---

仕事がかなり多忙になっていて、そのせいでタロットカードの作成が滞っています。

いつ前と同じペースで作れるようになるのかはわかりませんが、時間を見つけて少しずつ進めようと思っています。  
その間Fanboxはタロット以外のものを上げたりしながら更新できればと思っています。  
一応他の場所に公開していない内容を上げるつもりなので、更新の価値はあると思いますが、早く元のペースに戻りたいですね。

---

miton-wikiというものを作っています。  
自分はTRPGのシナリオをmarkdownでまとめ直して見やすい形に整形してからいつもKPをやっているのですが、それをまとめたいというのが主なモチベーションです。

初めはObsidianにまとめていたのですが、途中からcssをカスタマイズしたいと思うようになり、pandocでhtmlに変換するようになっていました。
ただ、これだといちいち変換の手間があるのが面倒でした。また、さらに最近は1陣、2陣と複数回のセッションをするときに、別々の導入を考えるというケースが発生していました。  
その別々の導入を表示できるようにするため、phpを書き、URLのクエリパラメータによって表示を分けるということをしていました。

ただ、せっかくなのでphpではない言語でちゃんとしたwikiエンジンを作成し、それを使いたいと思うようになりました。  
phpでない方法にしようと思ったのは、サーバーサイドに対する理解が自分には全然なかったので、これを機に知っておこうと思ったためです。  
pythonやrubyなど一般的な言語で書いてもよかったのですが、個人的にHaskellが好きなのでHaskellで書くことにしました。

一応、今のところmarkdownをパースしてhtmlに変換し、表示するところまではできています。  
まだ表示の切り替えは実装されていませんが、そろそろ実装する予定です。

ついでに設計についてもちゃんと考えたものにしたいと思っています。自分以外のメンテナーが出てきてもいいようにという考えです。  
ただ、前に述べた通り結構多忙なので、issueが来ても対応できる感じはしないです。

まあ、wikiエンジンなんて巷に溢れているので、使う人はいないでしょう。

---

私は自分の絵柄を愛していますが、これ以外が描けないのも考えものだなと思いました。

単に絵柄だけの話であれば別に問題ないのですが、このハッチングを描きながらでないと絵のバランスが取れないのです。  
輪郭線だけで描こうとすると確実にバランスが崩壊します。大きな崩壊ではないですが個人的には許せない程度に。

なので下描きの時点ではハッチングを描き、それからなぞるのですが、明らかに二度手間ですし、結局塗りの技術がハッチング前提になっているので、なんとも微妙です。  
やろうと思えばできる気がするので、どこかのタイミングで練習したいと思います。  
他の人たちは陰影なしでどうやってバランスを取っているんでしょう……
